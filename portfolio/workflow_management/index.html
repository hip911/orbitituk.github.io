<!doctype html><html lang=en><head><title>Workflow management with Argo Workflows | Orbit IT - Cloud Native DevOps Consultancy</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,user-scalable=no"><link rel=stylesheet href=/style.css><meta property="og:title" content="Workflow management with Argo Workflows"><meta property="og:description" content="Argo workflows is part of the Argo family, promotes itself as the workflow engine for kubernetes. It&rsquo;s usage purposes can be very similar to Apache AirFlow, to setup your pipelines/transformations to follow a certain pattern (DAG - Directed Acyclic Graph) It runs on kubernetes and is fully cloud-native"><meta property="og:type" content="article"><meta property="og:url" content="https://orbitit.uk/portfolio/workflow_management/"><meta property="article:published_time" content="2022-02-05T00:00:00+00:00"><meta property="article:modified_time" content="2022-02-05T00:00:00+00:00"></head><body class=is-preload><div id=page-wrapper><div id=header><h1><a href=https://orbitit.uk/ id=logo>Orbit IT - Cloud Native DevOps Consultancy</a></h1><nav id=nav><ul><li><a href=/>Home</a><li><a href=/consulting/>Consulting</a><li><a href=/implementation/>Implementation</a><li><a href=/maintenance/>Maintenance</a><li><a href=/posts/>Blog</a><li><a href=/portfolio/>Portfolio</a></ul></nav></div><section class="wrapper style1"><div class=container><div><div id=content><article><header><h2>Workflow management with Argo Workflows</h2><p></p><time>Feb 5, 2022</time><ul class=tags><li><a href=/tags/argo/>argo</a><li><a href=/tags/cloud-native/>cloud native</a><li><a href=/tags/kubernetes/>kubernetes</a><li><a href=/tags/workflow-management/>workflow management</a></ul></header><span class="image featured"><img src=/images/argo.png alt></span><p><a href=https://argoproj.github.io/argo-workflows/>Argo workflows</a> is part of the Argo family, promotes itself as <em>the workflow engine for kubernetes</em>. It&rsquo;s usage purposes can be very similar to Apache AirFlow, to setup your pipelines/transformations to follow a certain pattern (DAG - Directed Acyclic Graph)
It runs on kubernetes and is fully cloud-native. While Airflow would only run Python code, Argo WF runs containers with any language</p><p>In this case, the client needed such a solution, where</p><ol><li>a single &ldquo;order&rdquo; had many steps of long running jobs</li><li>the solutions had to handle scaling to a significant amount of parallel orders (eg single server with pulling queue would not work)</li><li>the long running jobs had dependencies on each other, but were sometimes optional</li><li>it would not have been cost effective to keep many servers constantly running, as orders came as swarms and were</li><li>depending on the size of input data different machines should be utilised for further cost optimisation</li><li>have multiple environments of the system, which reduces the risk for changes thus enables moving faster</li></ol><p>As mentioned before, the combination of Argo Workflows and the flexibility of Kubernetes provided a perfect solution.
To achieve the exact rules for the business logic of dependendent jobs was very flexible. Argo WF also provided options for failed workload paths with <a href=https://github.com/argoproj/argo-workflows/blob/master/examples/exit-handlers.yaml>exit handlers</a> (eg wrong input data)
With certain strategies used in Kubernetes ( <a href=https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#nodeselector>Node Selector</a> / Affinity rules combined with <a href=https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration/#concepts>Tolerations</a> ) a new machine only lived until the work has been completed.
With Kubernetes (GKE) autoscaling set to &ldquo;<a href=https://cloud.google.com/kubernetes-engine/docs/concepts/cluster-autoscaler#autoscaling_profiles>optimised for utilisation</a>&rdquo; the waste of scaling down after a completed job was greatly reduced.
Additionally all the job are being completed on <a href=https://cloud.google.com/kubernetes-engine/docs/how-to/preemptible-vms>preemptible</a> machines which further reduces the compute bill by close to 80%.
The <a href=https://kubernetes.io/docs/tasks/manage-kubernetes-objects/declarative-config/>declarative nature of kubernetes</a> made it fairly easy to run up multiple environments</p></article></div></div></div></section><div id=footer><div class=container><div class=row><section class="col-3 col-6-narrower col-12-mobilep"><h3>Links</h3><ul class=links><li><a href=/about-us/>About us</a><li><a href=/about-us/>Careers</a><li><a href=#>Sed et dapibus quis</a><li><a href=#>Rutrum accumsan dolor</a><li><a href=#>Mattis rutrum accumsan</a><li><a href=#>Suspendisse varius nibh</a><li><a href=#>Sed et dapibus mattis</a></ul></section><section class="col-3 col-6-narrower col-12-mobilep"><h3>More Links to Stuff</h3><ul class=links><li><a href=#>Duis neque nisi dapibus</a><li><a href=#>Sed et dapibus quis</a><li><a href=#>Rutrum accumsan sed</a><li><a href=#>Mattis et sed accumsan</a><li><a href=#>Duis neque nisi sed</a><li><a href=#>Sed et dapibus quis</a><li><a href=#>Rutrum amet varius</a></ul></section><section class="col-6 col-12-narrower"><h3>Get In Touch</h3><form method=post action="https://mail.google.com/mail/?view=cm&fs=1&tf=1&to=hello@orbitit.uk"><div class="row gtr-50"><div class="col-6 col-12-mobilep"><input type=text name=name id=name placeholder=Name></div><div class="col-6 col-12-mobilep"><input type=email name=email id=email placeholder=Email></div><div class=col-12><textarea name=message id=message placeholder=Message rows=5></textarea></div><div class=col-12><ul class=actions><li><input type=submit class="button alt" value="Send Message"></ul></div></div></form></section></div></div><ul class=icons><li><a href=# class="icon brands fa-twitter"><span class=label>Twitter</span></a><li><a href=# class="icon brands fa-facebook-f"><span class=label>Facebook</span></a><li><a href=# class="icon brands fa-github"><span class=label>GitHub</span></a><li><a href=# class="icon brands fa-linkedin-in"><span class=label>LinkedIn</span></a><li><a href=https://creativecommons.org/ class="icon brands fa-creative-commons"><span class=label>Creative Commons</span></a></ul><div class=copyright><ul class=menu><li>Â© ORBIT IT 2022. All rights reserved</ul></div></div></div><script src=/js/jquery.min.js></script><script src=/js/jquery.dropotron.min.js></script><script src=/js/browser.min.js></script><script src=/js/breakpoints.min.js></script><script src=/js/util.js></script><script src=/js/main.js></script></body></html>